# 翻译指南

本文档说明如何维护和贡献中文翻译版本。

**项目名称：** `system-prompts-and-models-of-ai-tools-zh`  
**原项目：** [x1xhlol/system-prompts-and-models-of-ai-tools](https://github.com/x1xhlol/system-prompts-and-models-of-ai-tools)

## 目录结构

- **翻译后的文件**：
  - `.txt` 和 `.json` 文件：创建 `.zh.{ext}` 版本（保留原文件），如 `Prompt.txt` → `Prompt.zh.txt`
  - `.md` 等其他文件：直接覆盖原文件，如 `README.md`（翻译为中文后覆盖）

- **术语表**：`glossary.json` - 存储技术术语的中英文对照

**注意**：

- `.txt` 和 `.json` 文件的原始英文版本会被保留
- `.md` 等其他文件会被翻译后的中文版本覆盖，建议使用 Git 管理版本，以便查看差异或恢复

## 术语表 (glossary.json)

术语表确保翻译过程中技术术语的一致性。所有术语都定义在 `glossary.json` 文件中。

### 添加新术语

1. 打开 `glossary.json`
2. 添加新的英文术语和对应的中文翻译
3. 格式：`"英文术语": "中文翻译"`

示例：

```json
{
  "system prompt": "系统提示词",
  "new term": "新术语"
}
```

### 术语翻译原则

1. **技术术语**：使用业界通用的中文术语
2. **专有名词**：保持英文原样（如 API、GitHub、Node.js）
3. **一致性**：同一术语在整个项目中保持一致
4. **准确性**：优先考虑准确性而非字面翻译

## 翻译脚本

### 功能特性

- ✅ 自动识别并保留代码块（Markdown、内联代码）
- ✅ 保留 URL 和文件路径
- ✅ 应用术语表确保一致性
- ✅ 增量翻译（只翻译新文件或更新的文件）
- ✅ 支持 .txt、.md 和 .json 文件
- ✅ **保留原文件**：`.txt` 和 `.json` 文件创建 `.zh.{ext}` 版本，保留原始英文文件
- ⚠️ `.md` 等其他文件会直接覆盖原文件

### 使用方法

#### 本地运行

```bash
# 安装依赖
npm install

# 运行翻译
npm run translate
```

#### 配置选项

编辑 `scripts/config.js` 可以调整：

- 翻译引擎（默认：Google，免费）
- 目标语言（默认：zh）
- 文件扩展名过滤
- 忽略的目录和文件
- 翻译延迟（避免速率限制）

**重要提示**：

- `.txt` 和 `.json` 文件会创建 `.zh.{ext}` 版本，原文件会被保留
- `.md` 等其他文件会直接覆盖原始文件，请确保已使用 Git 管理或备份

### 翻译流程

1. **代码块保护**：识别并临时替换代码块、URL、文件路径
2. **术语保护**：在翻译前保护术语表中的术语，避免被误翻译
3. **文本翻译**：使用 translate 包进行翻译
4. **代码块恢复**：将占位符恢复为原始内容
5. **术语应用**：根据术语表替换需要翻译的术语
6. **文件保存**：
   - `.txt` 和 `.json` 文件：创建 `.zh.{ext}` 版本（保留原文件）
   - `.md` 等其他文件：直接覆盖原始文件

## GitHub Actions 自动翻译

### 工作流说明

`.github/workflows/sync-and-translate.yml` 自动执行：

1. **同步上游更新**（每天 UTC 0:00）
   - 拉取上游仓库的最新更改
   - 合并到本地 main 分支

2. **自动翻译**
   - 检测新增或修改的文件
   - 运行翻译脚本
   - 提交翻译结果

3. **手动触发**
   - 可以在 GitHub Actions 页面手动触发工作流

### 配置要求

- 无需额外配置（使用免费的 Google 翻译）
- 如需使用其他翻译引擎，可在 GitHub Secrets 中设置 `TRANSLATE_KEY`

## 文件类型处理

### .txt 文件

- 完整翻译所有文本内容
- 保留所有代码块、URL、文件路径
- 应用术语表
- **文件命名**：创建 `.zh.txt` 版本（如 `Prompt.txt` → `Prompt.zh.txt`），原文件保留

### .md 文件

- 完整翻译所有文本内容
- 保留所有代码块、URL、文件路径
- 应用术语表
- **文件命名**：直接覆盖原文件（如 `README.md` 被翻译后的中文版本覆盖）

### .json 文件

- 只翻译 `description` 字段中的文本
- 保留 JSON 结构和其他字段
- 递归处理嵌套对象
- **文件命名**：创建 `.zh.json` 版本（如 `Tools.json` → `Tools.zh.json`），原文件保留

## 翻译质量

### 当前状态

- 使用 Google 翻译（免费）
- 自动应用术语表
- 保留所有代码和技术内容

### 改进建议

1. **人工校对**：重要文件建议人工校对
2. **术语完善**：持续更新 `glossary.json`
3. **上下文理解**：某些技术文档可能需要上下文调整

## 贡献指南

### 如何贡献

1. **改进翻译**
   - Fork 仓库
   - 修改已翻译的文件：
     - `.txt` 和 `.json` 文件：修改对应的 `.zh.{ext}` 版本（如 `Prompt.zh.txt`、`Tools.zh.json`）
     - `.md` 等其他文件：直接修改已翻译的文件（如 `README.md`）
   - 提交 PR

2. **添加术语**
   - 编辑 `glossary.json`
   - 添加新的术语映射
   - 提交 PR

3. **报告问题**
   - 在 Issues 中报告翻译错误
   - 提供具体的文件路径和问题描述

### 提交规范

- 提交信息：`fix: 修正 README.md 中的翻译错误`
- 或：`feat: 添加新术语到 glossary.json`

## 常见问题

### Q: 翻译脚本会修改原始文件吗？

A: **取决于文件类型**：

- **`.txt` 和 `.json` 文件**：不会修改原文件，会创建 `.zh.{ext}` 版本（如 `Prompt.txt` → `Prompt.zh.txt`），原文件保留
- **`.md` 等其他文件**：会直接覆盖原始文件，将其替换为中文翻译

建议使用 Git 管理版本，以便：

- 查看翻译前后的差异
- 恢复原始英文版本（如果需要）
- 追踪翻译历史

**重要提示**：在运行翻译脚本前，请确保已提交或备份原始文件（特别是 `.md` 文件）。

### Q: 如何只翻译特定文件？

A: 可以修改 `scripts/config.js` 中的 `fileExtensions` 或 `ignoreFiles` 配置。

### Q: 翻译速度慢怎么办？

A: 可以调整 `config.js` 中的 `translationDelay` 参数，但要注意避免触发速率限制。

### Q: 可以使用其他翻译引擎吗？

A: 可以。`translate` 包支持 Google、Yandex、Libre、DeepL。修改 `scripts/config.js` 中的 `engine` 设置。

### Q: 翻译失败怎么办？

A: 脚本会自动重试（最多3次）。如果持续失败，检查网络连接或翻译服务状态。

## 维护者

- 翻译自动化：GitHub Actions
- 术语表维护：社区贡献
- 翻译质量：持续改进

## 许可证

翻译版本遵循原项目的 GPL-3.0 许可证。

---

**最后更新：** 2025年12月5日

**重要变更**：

- `.txt` 和 `.json` 文件会创建 `.zh.{ext}` 版本，保留原始英文文件
- `.md` 等其他文件会直接覆盖原始文件
- 翻译前会保护术语表中的术语，确保专有名词不被误翻译
